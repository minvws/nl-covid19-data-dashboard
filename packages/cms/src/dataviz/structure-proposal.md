# Timeline and Chart Structures

## Globally Unique Identifier

In order to connect chart instances to data in the cms we could identify each
unique instance by defining the following elements:

1. scope (ac,nl,vr,gm,eu)
2. metric name (sewer)
3. component type (time-series)
4. (optional) metric property (\*)

The scopes would be:

- ac: actueel
- nl: national
- vr: safety-region
- gm: municipality
- eu: europe/international

We are not yet using a scope identifier for actueel, but I think it might help
since then our scopes mirror the main navigation of the app. Alternatively we
could consider ac == nl.

This combination of elements should be sufficient to generate a globally unique
id for each data visualization on the dashboard. It makes a direct coupling to
our data structures, making it convenient to fetch additional data from other
configurations like threshold data.

Basing objects on these properties would allow us to start building a collection
of sortable / searchable objects without having a pre-defined page structure in
the CMS.

We can store these objects under an opaque id generated by Sanity, but adding
new objects should be tightly controlled, by checking on all elements so that we
never add two of the same. Also the properties that make up the "identifier"
should not be editable in the CMS afterwards.

Alternatively we could combine the id elements into a string and use that as the
document id, but I don't see a good reason to do this as we need to control
adding new elements anyway.

Element 3 of the identifier will be implied by the Sanity object type I think,
so we do not have to store that in a field.

(\*) Element 4 should be optional and might not required. For example in some cases we are showing
multiple maps next to each other based on properties from the same data source /
metric name like behavior, but these maps do not have unique additional data
attached to individual instances. The thresholds are shared and currently see no
use-case for addressing them individually. On the other hand, when we use KPIs
they are usually

If the elements would be serialized into an identifier string it could look
like:

`vr_sewer_timeSeries`

Additionally if we want to be able to define objects for specific VR and GM
codes, we would append them in the scope string:

`vr09_sewer_timeSeries`

## Component Types

For element 3 we can define a fixed set of types loosely based off the names of our
components:

- kpi
- timeSeries
- miniTrend
- map (choropleth)
- table

Each component type will have its own schema which defines other properties that
can be set in the CMS specific for that type. We can start with just allowing
time-series and have only their timeline data configured, but then we can move
on to add things like title, description, metadata etc.

These properties are pretty stable nowadays, and any configuration that we don't
like to have configurable by cms (yet) we should be able to programmatically look
up via the id elements.

## Case Study

### landelijk/ziekenhuis-opnames

### landelijk/vaccinaties
